<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Forum - LearnHub</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
  font-family:'Poppins',sans-serif;
  background: linear-gradient(135deg,#0ea5e9,#8b5cf6);
  color:#fff;
  margin:0;
  padding:0;
}
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 20px;
  background:rgba(0,0,0,0.4);
}
header h1 {font-size:1.8rem;color:#38bdf8;}
header button {
  padding:8px 12px;
  border:none;
  border-radius:8px;
  background:#ef4444;
  color:#fff;
  cursor:pointer;
}
.container {max-width:900px;margin:20px auto;padding:0 15px;}
.card {background:rgba(0,0,0,0.25);padding:20px;border-radius:12px;margin-bottom:20px;}
.forum-list {max-height:500px;overflow:auto;margin-top:15px;border-radius:10px;background:rgba(0,0,0,0.15);padding:15px;}
.post {padding:10px 15px;border-radius:10px;margin-bottom:12px;background:rgba(14,165,233,0.3);}
.post small{display:block;font-size:0.75rem;margin-top:4px;color:#e2e8f0;}
.input-area{display:flex;gap:10px;margin-top:10px;}
.input-area input{flex:1;padding:10px;border-radius:8px;border:none;}
.input-area button{padding:10px 15px;border:none;border-radius:8px;background:#0ea5e9;color:#fff;cursor:pointer;}
.input-area button:hover{background:#38bdf8;}
</style>
</head>
<body>

<header>
  <h1>Student Discussion Forum</h1>
  <button id="logoutBtn">Logout</button>
</header>

<div class="container">
  <div class="card">
    <h2>Forum</h2>
    <div class="forum-list" id="forumList"></div>
    <div class="input-area">
      <input type="text" id="postInput" placeholder="Write a question or comment...">
      <button id="postBtn">Post</button>
    </div>
  </div>
</div>

<script>
// ===== Current Student =====
const currentUser = localStorage.getItem('currentUser');
const displayName = JSON.parse(localStorage.getItem('user_' + currentUser))?.name || currentUser;

// ===== Logout =====
document.getElementById('logoutBtn').addEventListener('click', ()=>{
  localStorage.removeItem('currentUser');
  window.location.href='login.html';
});

// ===== Forum =====
const forumListEl = document.getElementById('forumList');
const postInput = document.getElementById('postInput');
const postBtn = document.getElementById('postBtn');

function loadForum(){
  const posts = JSON.parse(localStorage.getItem('forum_posts') || '[]');
  forumListEl.innerHTML = '';
  posts.slice().reverse().forEach(p=>{
    const div = document.createElement('div');
    div.className = 'post';
    div.innerHTML = `<strong>${p.author}</strong>: ${p.text} <small>${new Date(p.ts).toLocaleString()}</small>`;
    forumListEl.appendChild(div);
  });
}
loadForum();

postBtn.addEventListener('click', ()=>{
  const text = postInput.value.trim();
  if(!text) return alert('Enter a message');
  const posts = JSON.parse(localStorage.getItem('forum_posts') || '[]');
  posts.push({author: displayName, text, ts: Date.now()});
  localStorage.setItem('forum_posts', JSON.stringify(posts));
  postInput.value = '';
  loadForum();
});
</script>

</body>
</html>
